<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Generator</title>
</head>

<body>
    <h2>Block Generator</h2>
    <form id="generator_form">
        <label for="textInput">Enter a message:</label><br>
        <input type="text" id="textInput" name="textInput"><br>
        <button type="submit">Submit</button>
    </form>
    <div id="result"></div>

    <script>
        class BlockGenerator {
            constructor() {
                this._blocks = {
                    "1": ['c', 'n', 'g', 'w'],
                    "2": ['o', 'p', 'h', '&#x2665;'],
                    "3": ['n', 'p', 'e', 'k'],
                    "4": ['g', 'p', 'j', 'a'],
                    "5": ['r', 'y', 'l', '4'],
                    "6": ['a', 'n', 'o', 'f'],
                    "7": ['t', 'i', 'm', 'u'],
                    "8": ['u', 'v', 's', 'a'],
                    "9": ['l', 'e', 'b', 'r'],
                    "10": ['a', 'l', 'o', 'm'],
                    "11": ['t', 'r', 'd', 'i'],
                    "12": ['i', 'd', 'h', 'v'],
                    "13": ['o', 'r', 'g', 's'],
                    "14": ['n', 'd', 'e', 't'],
                    "15": ['s', 'w', 'c', 'a'],
                    "16": ['flag', 'y', 'e', 'q'],
                };
            }

            Find_Blocks(text) {
                const usedBlocks = new Set();  // Keep track of used blocks
                const indices = [];
                const textWithoutSpaces = text.replace(/\s/g, ""); // Ignore spaces
                for (const char of textWithoutSpaces) {
                    let found = false;
                    for (const [key, block] of Object.entries(this._blocks)) {
                        if (block.includes(char) && !usedBlocks.has(key)) {
                            indices.push(key);
                            usedBlocks.add(key);
                            found = true;
                            break;
                        }
                    }
                    if (!found) {
                        return "Can't spell message";
                    }
                }
                return indices;
            }
        }



        const generator = new BlockGenerator();

        const form = document.getElementById("generator_form");
        const resultDiv = document.getElementById("result");

        form.addEventListener("submit", function (event) {
            event.preventDefault();
            const textInput = document.getElementById("textInput").value;
            const indices = generator.Find_Blocks(textInput);
            resultDiv.textContent = "Indices: " + indices.join(", ");
        });
    </script>
</body>

</html>